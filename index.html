<head>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      var nodes = d3.range(40).map(function (i) {
        return {
          r: 20,
        };
      });
      var simulation = d3.forceSimulation(nodes)
        .velocityDecay(0.2)
        .on("tick", ticked)
        .force("collide", d3.forceCollide().radius(function (d) { return d.r }).iterations(2).strength(0.2))
        .force('x', d3.forceX(250).strength(0.1))
        .force('y', d3.forceY(490).strength(0.1))

      function ticked() {
        let u = d3.select("#svg").selectAll('circle').data(nodes);
        u.enter()
          .append('circle')
          .attr('r', function(d){return d.r})
          .merge(u)
          .attr('cx', function(d) {
            return d.x
          })
          .attr('cy', function(d) {
            return d.y
          })
          .on('click', () => console.log('clicked'))

        u.exit().remove();
      }
    })
  </script>

</head>

<body>
  <svg id="svg" width="500" height="500" />
</body>