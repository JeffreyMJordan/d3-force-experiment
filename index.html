<head>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      var nodes = d3.range(40).map(function (i) {
        return {
          r: 20,
        };
      });
      var simulation = d3.forceSimulation(nodes)
        .on("tick", ticked)
        .force("collide", d3.forceCollide().radius(function (d) { return d.r }).iterations(2).strength(0.2))
        .force('x', d3.forceX().strength(0.1))
        .force('y', d3.forceY().strength(0.1))

      function drag(e){
        d3.select(this).attr('cx', e.x = d3.event.x).attr('cy', e.y = d3.event.y);
      }

      function dragStart(e){
        console.log(e)
      }

      function ticked() {
        let u = d3.select("#svg").selectAll('circle').data(nodes).call(d3.drag().on("start", dragStart).on("drag", drag));
        u.enter()
          .append('circle')
          .attr('r', function(d){return d.r})
          .merge(u)
          .attr('cx', function(d) {
            return d.x
          })
          .attr('cy', function(d) {
            return d.y
          });

        u.exit().remove();
      }
    })
  </script>

</head>

<body>
  <svg id="svg" width="500" height="500" />
</body>